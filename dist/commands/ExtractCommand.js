import{existsSync as o,mkdirSync as t,readFileSync as r,writeFileSync as e}from"node:fs";import{join as f}from"node:path";import{fatal as i}from"@triforce-heroes/triforce-core/Console";import{normalize as n}from"@triforce-heroes/triforce-core/Path";import{getEntries as m,processEntry as s}from"../Reader.js";export function ExtractCommand(c,a,d){o(c)||i(`File not found: ${c}`),o(a)||i(`File not found: ${a}`);let p=n(d??`${c}_contents`);o(p)||t(p),process.stdout.write(`Extracting ${n(c)} to ${p}... `);let l=Date.now(),u=r(c);for(let o of m(Buffer.from(r(a))))for(let t of s(u,o))e(f(p,t.name),t.data);process.stdout.write(`OK (${((Date.now()-l)/1e3).toFixed(2)}s)
`)}