import{existsSync as o,readdirSync as r,writeFileSync as e}from"node:fs";import{fatal as t}from"@triforce-heroes/triforce-core/Console";import{normalize as i}from"@triforce-heroes/triforce-core/Path";import{processEntries as s}from"../Rebuilder.js";export function RebuildCommand(f,n,c){o(f)||t(`Directory not found: ${n}`),process.stdout.write(`Rebuilding ${i(n)} to ${n} and ${c}... `);let d=Date.now(),{indexes:m,blocks:p}=s(f,r(f));e(c,m),e(n,p),process.stdout.write(`OK (${((Date.now()-d)/1e3).toFixed(2)}s)
`)}